---
title: Environment Variables
permalink: /reference/environment-variables
category: Configuration
subCategory: Reference
menuOrder: 4
---

Cube.js defines a number of environment variables that can be used to change
behavior. Some of these variables can also be set via [configuration
options][link-config].

[link-config]: /config

## General

| Environment variable                 | Description                                                                                                                                                                                      | Possible Values                                             |
| ------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------- |
| `CUBEJS_CACHE_AND_QUEUE_DRIVER`      | The cache and queue driver to use for the Cube.js deployment. Defaults to `redis`                                                                                                                | `redis`, `memory`                                           |
| `CUBEJS_DEV_MODE`                    | If `true`, enables development mode. Defaults to `false`                                                                                                                                         | `true`, `false`                                             |
| `CUBEJS_API_SECRET`                  | The secret key used to sign and verify JWTs. Generated on project scaffold                                                                                                                       | A valid string                                              |
| `CUBEJS_APP`                         | An application ID used to uniquely identify the Cube.js deployment. Can be different for multitenant setups. Defaults to `cubejs`                                                                | A valid string                                              |
| `CUBEJS_SCHEDULED_REFRESH_TIMER`     | If `true`, enabled scheduled refreshes. Can also be set to a number representing how many seconds to wait before triggering another refresh. Defaults to `false`                                 | `true`, `false` or a valid number of seconds                |
| `CUBEJS_SCHEDULED_REFRESH_TIMEZONES` | A comma-separated [list of timezones to schedule refreshes for](/config#options-reference-scheduled-refresh-timer).                                                                              | [A valid timezone from the tz database][link-tz-database]   |
| `CUBEJS_PRE_AGGREGATIONS_SCHEMA`     | [Schema name](/config#options-reference-pre-aggregations-schema) to use for storing pre-aggregations. Defaults to `dev_pre_aggregations`/`prod_pre_aggregations` for development/production mode | A valid string                                              |
| `CUBEJS_SCHEMA_PATH`                 | The path where Cube.js loads schemas from. Defaults to `schema`                                                                                                                                  | A valid folder containing Cube.js schemas                   |
| `CUBEJS_TELEMETRY`                   | If `true`, then send telemetry to CubeJS. Defaults to `true`                                                                                                                                     | `true`, `false`                                             |
| `CUBEJS_WEB_SOCKETS`                 | If `true`, then use WebSocket for data fetching. Defaults to `true`                                                                                                                              | `true`, `false`                                             |
| `PORT`                               | The port for a Cube.js deployment to listen to API connections on. Defaults to `4000`                                                                                                            | A valid port number                                         |
| `CUBEJS_LOG_LEVEL`                   | The logging level for Cube.js. Defaults to `warn`                                                                                                                                                | `error`, `info`, `trace`, `warn`                            |
| `DEBUG_LOG`                          | If `true`, enables debug logging. Defaults to `false`                                                                                                                                            | `true`, `false`                                             |
| `CUBEJS_REDIS_URL`                   | The host URL for a Redis server                                                                                                                                                                  | A valid Redis host URL                                      |
| `CUBEJS_REDIS_PASSWORD`              | The password used to connect to the Redis server                                                                                                                                                 | A valid Redis password                                      |
| `CUBEJS_REDIS_TLS`                   | If `true`, then the connection to the Redis server is protected by TLS authentication. Defaults to `false`                                                                                       | `true`, `false`                                             |
| `CUBEJS_REDIS_POOL_MAX`              | The maximum number of connections to keep active in the Redis connection pool. Must be higher than `CUBEJS_REDIS_POOL_MIN`. Defaults to `1000`                                                   | A valid number of connections.                              |
| `CUBEJS_REDIS_POOL_MIN`              | The minimum number of connections to keep active in the Redis connection pool. Must be lower than `CUBEJS_REDIS_POOL_MAX`. Defaults to `2`                                                       | A valid number of connections                               |
| `CUBEJS_REDIS_USE_IOREDIS`           | Use [`ioredis`][gh-ioredis] instead of[ `redis`][gh-node-redis]. Defaults to `false`                                                                                                             | `true`, `false`                                             |
| `CUBEJS_JWK_URL`                     | A valid URL to a JSON Web Key Sets (JWKS)                                                                                                                                                        | `https://<AUTH0-SUBDOMAIN>.auth0.com/.well-known/jwks.json` |
| `CUBEJS_JWT_KEY`                     | The secret key used to sign and verify JWTs. Similar to `CUBEJS_API_SECRET`                                                                                                                      | A valid string                                              |
| `CUBEJS_JWT_AUDIENCE`                | An audience value which will be used to enforce the [`aud` claim from inbound JWTs][link-jwt-ref-aud]                                                                                            | `https://myapp.com`                                         |
| `CUBEJS_JWT_ISSUER`                  | An issuer value which will be used to enforce the [`iss` claim from inbound JWTs][link-jwt-ref-iss]                                                                                              | `https://<AUTH0-SUBDOMAIN>.auth0.com/`                      |
| `CUBEJS_JWT_SUBJECT`                 | A subject value which will be used to enforce the [`sub` claim from inbound JWTs][link-jwt-ref-sub]                                                                                              | `person@example.com`                                        |
| `CUBEJS_JWT_ALGS`                    | [Any supported algorithm for decoding JWTs][gh-jsonwebtoken-algs]                                                                                                                                | `HS256`, `RS256`                                            |
| `CUBEJS_JWT_CLAIMS_NAMESPACE`        | A namespace within the decoded JWT under which any custom claims can be found                                                                                                                    | `https://myapp.com`                                         |

[gh-ioredis]: https://github.com/luin/ioredis
[gh-node-redis]: https://github.com/NodeRedis/node-redis
[link-tz-database]: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
[link-jwt-ref-iss]: https://tools.ietf.org/html/rfc7519#section-4.1.1
[link-jwt-ref-sub]: https://tools.ietf.org/html/rfc7519#section-4.1.2
[link-jwt-ref-aud]: https://tools.ietf.org/html/rfc7519#section-4.1.3
[gh-jsonwebtoken-algs]:
  https://github.com/auth0/node-jsonwebtoken#algorithms-supported
[link-jwk-ref]: https://tools.ietf.org/html/rfc7517#section-4

## Database Connection

The following environment variables are used to provide credentials for Cube.js
to connect to the databases. You can learn more about connecting to the
databases [in this guide][link-connecting-to-db].

[link-connecting-to-db]: /connecting-to-the-database

| Environment variable                            | Used With            | Description                                                                                                                                                                                                 | Possible Values                                                  |
| ----------------------------------------------- | -------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------- |
| `CUBEJS_AWS_KEY`                                | AWS Athena, JDBC     | The AWS Access Key ID to use for database connections                                                                                                                                                       | A valid AWS Access Key ID                                        |
| `CUBEJS_AWS_REGION`                             | AWS Athena, JDBC     | The AWS region of the Cube.js deployment                                                                                                                                                                    | [A valid AWS region][link-aws-regions]                           |
| `CUBEJS_AWS_S3_OUTPUT_LOCATION`                 | AWS Athena, JDBC     | The S3 path to store query results made by the Cube.js deployment                                                                                                                                           | A valid S3 path                                                  |
| `CUBEJS_AWS_SECRET`                             | AWS Athena, JDBC     | The AWS Secret Access Key to use for database connections                                                                                                                                                   | A valid AWS Secret Access Key                                    |
| `CUBEJS_DB_PULL_TIMEOUT`                        | BigQuery, AWS Athena | Timeout for query polling                                                                                                                                                                                   | A number in seconds or a string that specify time (`1s`, `5m`)   |
| `CUBEJS_DB_PULL_MAX_INTERVAL`                   | BigQuery, AWS Athena | Max interval on retries for query polling                                                                                                                                                                   | A number in seconds or a string that specify time (`5s`, `1m`)   |
| `CUBEJS_DB_BQ_CREDENTIALS`                      | BigQuery             | A Base64 encoded JSON key file for connecting to Google BigQuery                                                                                                                                            | A valid Google BigQuery JSON key file encoded as a Base64 string |
| `CUBEJS_DB_BQ_KEY_FILE`                         | BigQuery             | The path to a JSON key file for connecting to Google BigQuery                                                                                                                                               | A valid Google BigQuery JSON key file                            |
| `CUBEJS_DB_BQ_PROJECT_ID`                       | BigQuery             | The Google BigQuery project ID to connect to                                                                                                                                                                | A valid Google BigQuery Project ID                               |
| `CUBEJS_DB_BQ_EXPORT_BUCKET`                    | BigQuery             | GCS bucket to use for export pre-aggregation tables to Cube Store. Use it to achieve best Cube Store ingestion performance possible.                                                                        | A valid Google Cloud Storage Bucket ID                           |
| `CUBEJS_DB_BQ_LOCATION`                         | BigQuery             | The Google BigQuery dataset location to connect to                                                                                                                                                          | A valid Google BigQuery regional location                        |
| `CUBEJS_DB_URL`                                 | Druid, Elasticsearch | The URL for a database                                                                                                                                                                                      | A valid database URL for Druid/Elasticsearch                     |
| `CUBEJS_DB_ELASTIC_OPENDISTRO`                  | Elasticsearch        | If `true`, then use the Open Distro for Elasticsearch                                                                                                                                                       | `true`, `false`                                                  |
| `CUBEJS_DB_ELASTIC_QUERY_FORMAT`                | Elasticsearch        | By default, queries return data in JDBC format, but you can also return data in standard Elasticsearch JDBC, JSON, CSV, YAML or raw formats (only JSON and JDBC are currently supported)                    | `json`, `jdbc`                                                   |
| `CUBEJS_DB_ELASTIC_APIKEY_ID`                   | Elasticsearch        | [ID of the API key from elastic.co][link-elastic-api-keys]                                                                                                                                                  | A valid Elastic.co API key ID                                    |
| `CUBEJS_DB_ELASTIC_APIKEY_KEY`                  | Elasticsearch        | [Value of the API key from elastic.co][link-elastic-api-keys]                                                                                                                                               | A valid Elastic.co API key value                                 |
| `CUBEJS_EXT_DB_HOST`                            | External             | The host URL for an external pre-aggregations database                                                                                                                                                      | A valid database host URL                                        |
| `CUBEJS_EXT_DB_NAME`                            | External             | The name of the external pre-aggregations database to connect to                                                                                                                                            | A valid database name                                            |
| `CUBEJS_EXT_DB_PASS`                            | External             | The password used to connect to the external pre-aggregations database                                                                                                                                      | A valid database password                                        |
| `CUBEJS_EXT_DB_PORT`                            | External             | The port for the external pre-aggregations database                                                                                                                                                         | A valid port number                                              |
| `CUBEJS_EXT_DB_TYPE`                            | External             | A database type supported by Cube.js                                                                                                                                                                        | [A valid database supported by Cube.js][link-cubejs-databases]   |
| `CUBEJS_EXT_DB_USER`                            | External             | The username used to connect to the external pre-aggregations database                                                                                                                                      | A valid database username                                        |
| `CUBEJS_DB_SSL`                                 | General              | If `true`, enables SSL encryption for database connections from Cube.js                                                                                                                                     | `true`, `false`                                                  |
| `CUBEJS_DB_SSL_REJECT_UNAUTHORIZED`             | General              | If `true`, verifies the CA chain with the system's built-in CA chain                                                                                                                                        | `true`, `false`                                                  |
| `CUBEJS_DB_SSL_CA`                              | General              | The contents of a CA bundle in PEM format, or a path to one. For more information, check the `options.ca` property for TLS Secure Contexts [in the Node.js documentation][link-nodejs-tls-options]          | A valid CA bundle or a path to one                               |
| `CUBEJS_DB_SSL_CERT`                            | General              | The contents of an SSL certificate in PEM format, or a path to one. For more information, check the `options.cert` property for TLS Secure Contexts [in the Node.js documentation][link-nodejs-tls-options] | A valid SSL certificate or a path to one                         |
| `CUBEJS_DB_SSL_KEY`                             | General              | The contents of a private key in PEM format, or a path to one. For more information, check the `options.key` property for TLS Secure Contexts [in the Node.js documentation][link-nodejs-tls-options]       | A valid SSL private key or a path to one                         |
| `CUBEJS_DB_SSL_CIPHERS`                         | General              | The ciphers used by the SSL certificate. For more information, check the `options.ciphers` property for TLS Secure Contexts [in the Node.js documentation][link-nodejs-tls-options]                         | [Any valid SSL cipher(s)][link-nodejs-tls-ciphers]               |
| `CUBEJS_DB_SSL_SERVERNAME`                      | General              | The server name for the SNI TLS extension. For more information, check the `options.servername` property for TLS Connections [in the Node.js documentation][link-nodejs-tls-connect-opts]                   | A valid SNI TLS extension                                        |
| `CUBEJS_DB_SSL_PASSPHRASE`                      | General              | The passphrase used to encrypt the SSL private key. For more information, check the `options.passphrase` property for TLS Secure Contexts [in the Node.js documentation][link-nodejs-tls-options]           | A valid passphrase                                               |
| `CUBEJS_DB_TYPE`                                | General              | A database type supported by Cube.js                                                                                                                                                                        | [A valid database supported by Cube.js][link-cubejs-databases]   |
| `CUBEJS_DB_USER`                                | General              | The username used to connect to the database                                                                                                                                                                | A valid database username                                        |
| `CUBEJS_DB_HOST`                                | General              | The host URL for a database                                                                                                                                                                                 | A valid database host URL                                        |
| `CUBEJS_DB_MAX_POOL`                            | General              | The maximum number of connections to keep active in the database connection pool                                                                                                                            | A valid number of connections                                    |
| `CUBEJS_DB_NAME`                                | General              | The name of the database to connect to                                                                                                                                                                      | A valid database name                                            |
| `CUBEJS_DB_PASS`                                | General              | The password used to connect to the database                                                                                                                                                                | A valid database password                                        |
| `CUBEJS_DB_PORT`                                | General              | The port for the database connection                                                                                                                                                                        | A valid port number                                              |
| `CUBEJS_DB_SCHEMA`                              | General              | The schema within the database to connect to                                                                                                                                                                | A valid schema name within a Presto database                     |
| `CUBEJS_DB_HIVE_CDH_VER`                        | Hive                 | The version of the CDH instance for Apache Hive                                                                                                                                                             | [A valid CDH version][link-hive-cdh-versions]                    |
| `CUBEJS_DB_HIVE_THRIFT_VER`                     | Hive                 | The version of Thrift Server for Apache Hive                                                                                                                                                                | [A valid Thrift Server version][link-hive-thrift-versions]       |
| `CUBEJS_DB_HIVE_TYPE`                           | Hive                 | The type of Apache Hive server                                                                                                                                                                              | `CDH`, `HIVE`                                                    |
| `CUBEJS_DB_HIVE_VER`                            | Hive                 | The version of Apache Hive                                                                                                                                                                                  | [A valid Apache Hive version][link-hive-versions]                |
| `CUBEJS_JDBC_DRIVER`                            | JDBC                 |                                                                                                                                                                                                             | `athena`                                                         |
| `CUBEJS_JDBC_URL`                               | JDBC                 | The URL for a JDBC connection                                                                                                                                                                               | A valid JDBC URL                                                 |
| `CUBEJS_DB_DOMAIN`                              | MSSQL                | A domain name within the database to connect to                                                                                                                                                             | A valid domain name within a MSSQL database                      |
| `CUBEJS_DB_SOCKET_PATH`                         | MySQL                | The path to a Unix socket for a MySQL database                                                                                                                                                              | A valid path to a Unix socket for a MySQL database               |
| `CUBEJS_DB_CATALOG`                             | Presto               | The catalog within the database to connect to                                                                                                                                                               | A valid catalog name within a Presto database                    |
| `CUBEJS_DB_SNOWFLAKE_ACCOUNT`                   | Snowflake            | The Snowflake account ID to use when connecting to the database                                                                                                                                             | A valid Snowflake account ID                                     |
| `CUBEJS_DB_SNOWFLAKE_REGION`                    | Snowflake            | The Snowflake region to use when connecting to the database                                                                                                                                                 | [A valid Snowflake region][link-snowflake-regions]               |
| `CUBEJS_DB_SNOWFLAKE_ROLE`                      | Snowflake            | The Snowflake role to use when connecting to the database                                                                                                                                                   | A valid Snowflake role for the account                           |
| `CUBEJS_DB_SNOWFLAKE_WAREHOUSE`                 | Snowflake            | The Snowflake warehouse to use when connecting to the database                                                                                                                                              | A valid Snowflake warehouse for the account                      |
| `CUBEJS_DB_SNOWFLAKE_CLIENT_SESSION_KEEP_ALIVE` | Snowflake            | If `true`, (keep the Snowflake connection alive indefinitely)[link-snowflake-connection-options]                                                                                                            | `true`, `false`                                                  |
| `CUBEJS_DB_DATABRICKS_URL`                      | Databricks           | The URL for a JDBC connection                                                                                                                                                                               | A valid JDBC URL                                                 |

## Cube Store

| Environment variable            | Description                                                                                                                       | Possible Values                                                                 |
| ------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------- |
| `CUBEJS_CUBESTORE_HOST`         | The hostname of the Cube Store deployment                                                                                         | A valid hostname                                                                |
| `CUBEJS_CUBESTORE_PORT`         | The port of the Cube Store deployment                                                                                             | A valid port number                                                             |
| `CUBESTORE_BIND_ADDR`           | The address/port pair for Cube Store's MySQL-compatible interface. Defaults to `0.0.0.0:3306`                                     | A valid address/port pair                                                       |
| `CUBESTORE_DATA_DIR`            | A path on the local filesystem to store database snapshots. Defaults to `.cubestore/data`                                         | A valid path on the local filesystem with read/write access                     |
| `CUBESTORE_GCS_BUCKET`          | The name of a bucket in GCS                                                                                                       | -                                                                               |
| `CUBESTORE_GCS_SUB_PATH`        | The path in a GCS bucket to store pre-aggregations. Optional                                                                      | -                                                                               |
| `CUBESTORE_HTTP_BIND_ADDR`      | The address/port pair for Cube Store's HTTP interface. Defaults to `0.0.0.0:3030`                                                 | A valid address/port pair                                                       |
| `CUBESTORE_HTTP_PORT`           | The port for Cube Store to listen to HTTP connections on. Ignored when `CUBESTORE_HTTP_BIND_ADDR` is set. Defaults to `3030`      | A valid port number                                                             |
| `CUBESTORE_JOB_RUNNERS`         | The number of parallel tasks that process non-interactive jobs like data insertion, compaction etc. Defaults to `4`               | A valid number                                                                  |
| `CUBESTORE_LOG_LEVEL`           | The logging level for Cube Store. Defaults to `error`                                                                             | `error`, `warn`, `info`, `debug`, `trace`                                       |
| `CUBESTORE_META_ADDR`           | The address/port pair for the **router** node in the cluster                                                                      | A valid address/port pair                                                       |
| `CUBESTORE_META_PORT`           | The port for the **router** node to listen for connections on. Ignored when `CUBESTORE_META_ADDR` is set.                         | A valid port number                                                             |
| `CUBESTORE_NO_UPLOAD`           | If `true`, prevents uploading serialized pre-aggregations to cloud storage                                                        | `true`, `false`                                                                 |
| `CUBESTORE_PORT`                | The port for Cube Store to listen to connections on. Ignored when `CUBESTORE_BIND_ADDR` is set. Defaults to `3306`                | A valid port number                                                             |
| `CUBESTORE_QUERY_TIMEOUT`       | The timeout for SQL queries in seconds. Defaults to `120`                                                                         | A number in seconds                                                             |
| `CUBESTORE_REMOTE_DIR`          | A path on the local filesystem to mirror the data in remote storage                                                               | A valid path on the local filesystem with read/write access                     |
| `CUBESTORE_S3_BUCKET`           | The name of a bucket in AWS S3                                                                                                    | -                                                                               |
| `CUBESTORE_S3_REGION`           | The region of a bucket in AWS S3                                                                                                  | -                                                                               |
| `CUBESTORE_S3_SUB_PATH`         | The path in a AWS S3 bucket to store pre-aggregations. Optional                                                                   | -                                                                               |
| `CUBESTORE_SELECT_WORKERS`      | The number of Cube Store sub-processes that handle `SELECT` queries. Defaults to `4`                                              | A valid number                                                                  |
| `CUBESTORE_SERVER_NAME`         | The full name and port number of the Cube Store server. Must be unique for each instance in cluster mode. Defaults to `localhost` | A valid address/port pair                                                       |
| `CUBESTORE_WAL_SPLIT_THRESHOLD` | The maximum number of rows to keep in a single chunk of data right after insertion. Defaults to `262144`                          | A valid number                                                                  |
| `CUBESTORE_WORKER_PORT`         | The port for Cube Store workers to listen to connections on. When set, the node will start as a **worker** in the cluster         | A valid port number                                                             |
| `CUBESTORE_WORKERS`             | A comma-separated list of address/port pairs; for example `worker-1:3123,localhost:3124,123.124.125.128:3123`                     | A comma-separated list of address/port pairs                                    |
| `SERVICE_ACCOUNT_JSON`          | A JSON string containing credentials for Google Cloud. Required when using Google Cloud Storage                                   | [The contents of a JSON credentials file for Google Cloud][link-gcp-creds-json] |

[link-aws-regions]:
  https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html#concepts-available-regions
[link-elastic-api-keys]:
  https://www.elastic.co/guide/en/kibana/master/api-keys.html#create-api-key
[link-gcp-creds-json]:
  https://cloud.google.com/iam/docs/creating-managing-service-account-keys
[link-cubejs-databases]: /connecting-to-the-database
[link-nodejs-tls-options]:
  https://nodejs.org/docs/latest/api/tls.html#tls_tls_createsecurecontext_options
[link-nodejs-tls-connect-opts]:
  https://nodejs.org/docs/latest/api/tls.html#tls_tls_connect_options_callback
[link-nodejs-tls-ciphers]:
  https://nodejs.org/docs/latest/api/tls.html#tls_modifying_the_default_tls_cipher_suite
[link-hive-cdh-versions]:
  https://docs.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_cdh_6_download.html
[link-hive-thrift-versions]: https://github.com/apache/thrift/releases
[link-hive-versions]: https://hive.apache.org/downloads.html
[link-snowflake-regions]:
  https://docs.snowflake.com/en/user-guide/intro-regions.html
[link-snowflake-connection-options]:
  https://docs.snowflake.com/en/user-guide/nodejs-driver-use.html#additional-connection-options
