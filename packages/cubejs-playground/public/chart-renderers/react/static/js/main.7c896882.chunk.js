(this["webpackJsonpreact-charts"]=this["webpackJsonpreact-charts"]||[]).push([[0],{662:function(e,t,n){},791:function(e,t,n){},939:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"getChartComponent",(function(){return ze})),n.d(r,"getCommon",(function(){return Ne})),n.d(r,"getImports",(function(){return Ye}));var a={};n.r(a),n.d(a,"getChartComponent",(function(){return He})),n.d(a,"getCommon",(function(){return Ge})),n.d(a,"getImports",(function(){return Ue}));var i={};n.r(i),n.d(i,"getChartComponent",(function(){return We})),n.d(i,"getCommon",(function(){return Je})),n.d(i,"getImports",(function(){return Xe}));var s={};n.r(s),n.d(s,"getChartComponent",(function(){return Ze})),n.d(s,"getCommon",(function(){return et})),n.d(s,"getImports",(function(){return tt}));var o=n(0),u=n.n(o),c=n(27),l=n.n(c),d=(n(662),n(42)),p=n(553),m=(n(426),n(437),n(438),n(439),n(244),n(444),n(740),n(445),n(446),n(447),n(449),n(450),n(451),n(452),n(453),n(461),n(335),n(462),n(464),n(750),n(752),n(753),n(754),n(756),n(757),n(758),n(760),n(761),n(471),n(763),n(764),n(765),n(768),n(769),n(770),n(772),n(59)),f=n.n(m),y=n(56),h=n.n(y),b=(n(266),n(86)),v=n.n(b),g=n(96),j=n.n(g),x=n(23),O=n.n(x),C=(n(529),n(123)),S=n.n(C),k=n(46),R=n.n(k),w=n(24),A=n.n(w),D=n(962),q=n(175),P=n(963),E=n(533),T=n(944),M=n(945),F=n(556),V=n(946),Q=n(959),L=n(965),_=n(947),I=n(948),z=n(949),N=n(964),Y=n(966),B=n(958),H=n(950),G=(n(951),n(557)),U=n(364),K=n.n(U),W=n(530),J=(n(531),n(786),n(206)),X=n.n(J),$=n(207),Z=n.n($),ee=n(101),te=n.n(ee),ne=n(532),re=n.n(ne);function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se=Object(W.extendMoment)(K.a),oe={day:function(e){return Array.from(e.by("day")).map((function(e){return e.format("YYYY-MM-DDT00:00:00.000")}))},month:function(e){return Array.from(e.snapTo("month").by("month")).map((function(e){return e.format("YYYY-MM-01T00:00:00.000")}))},year:function(e){return Array.from(e.snapTo("year").by("year")).map((function(e){return e.format("YYYY-01-01T00:00:00.000")}))},hour:function(e){return Array.from(e.by("hour")).map((function(e){return e.format("YYYY-MM-DDTHH:00:00.000")}))},minute:function(e){return Array.from(e.by("minute")).map((function(e){return e.format("YYYY-MM-DDTHH:mm:00.000")}))},second:function(e){return Array.from(e.by("second")).map((function(e){return e.format("YYYY-MM-DDTHH:mm:ss.000")}))},week:function(e){return Array.from(e.snapTo("isoweek").by("week")).map((function(e){return e.startOf("isoweek").format("YYYY-MM-DDT00:00:00.000")}))}},ue=/^\d\d\d\d-\d\d-\d\d$/,ce=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z?$/,le=function(e){var t=new Map;return function(n){return n.forEach((function(n){var r=e(n);t.has(r)||t.set(r,[]),t.get(r).push(n)})),Array.from(t.entries())}},de={REGULAR_QUERY:"regularQuery",COMPARE_DATE_RANGE_QUERY:"compareDateRangeQuery",BLENDING_QUERY:"blendingQuery"},pe=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(v()(this,e),this.loadResponse=t,null!=this.loadResponse.queryType?(this.queryType=t.queryType,this.loadResponses=t.results):(this.queryType=de.REGULAR_QUERY,this.loadResponse.pivotQuery=ie(ie({},t.query),{},{queryType:this.queryType}),this.loadResponses=[t]),!Object.values(de).includes(this.queryType))throw new Error("Unknown query type");this.parseDateMeasures=n.parseDateMeasures,this.options=n,this.backwardCompatibleData=[]}return j()(e,[{key:"drillDown",value:function(e,t){if(this.queryType===de.COMPARE_DATE_RANGE_QUERY)throw new Error("compareDateRange drillDown query is not currently supported");if(this.queryType===de.BLENDING_QUERY)throw new Error("Data blending drillDown query is not currently supported");var n=e.xValues,r=void 0===n?[]:n,a=e.yValues,i=void 0===a?[]:a,s=this.normalizePivotConfig(t),o=[];s.x.forEach((function(e,t){return o.push([e,r[t]])})),s.y.forEach((function(e,t){return o.push([e,i[t]])}));var u=this.query(),c=u.filters,l=void 0===c?[]:c,d=u.segments,p=void 0===d?[]:d,m=this.loadResponses[0].annotation.measures,f=o.find((function(e){return"measures"===A()(e,1)[0]}))||[],y=A()(f,2)[1];if(void 0===y){var h=Object.keys(m);y=A()(h,1)[0]}if(!(m[y]&&m[y].drillMembers||[]).length)return null;var b=[{member:y,operator:"measureFilter"}].concat(R()(l)),v=[];o.filter((function(e){return"measures"!==A()(e,1)[0]})).forEach((function(e){var t=A()(e,2),n=t[0],r=t[1],a=n.split("."),i=A()(a,3),s=i[0],o=i[1],u=i[2];if(void 0!==u){var c=se.range(r,r).snapTo(u);v.push({dimension:[s,o].join("."),dateRange:[c.start,c.end].map((function(e){return e.format(se.HTML5_FMT.DATETIME_LOCAL_MS)}))})}else null==r?b.push({member:n,operator:"notSet"}):b.push({member:n,operator:"equals",values:[r.toString()]})}));var g=this.loadResponses[0].query;return 0===v.length&&g.timeDimensions.length>0&&null==g.timeDimensions[0].granularity&&v.push(g.timeDimensions[0]),ie(ie(ie({},m[y].drillMembersGrouped),{},{filters:b},p.length>0?{segments:p}:{}),{},{timeDimensions:v,segments:p,timezone:g.timezone})}},{key:"series",value:function(e){var t=this;return this.seriesNames(e).map((function(n){var r=n.title,a=n.key;return{title:r,key:a,series:t.chartPivot(e).map((function(e){var t=e.category,n=e.x;return{value:S()(e,["category","x"])[a],category:t,x:n}}))}}))}},{key:"axisValues",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.loadResponses[t].query;return function(t){var r=function(n){return e.filter((function(e){return"measures"!==e})).map((function(e){return null!=t[e]?t[e]:null})).concat(n?[n]:[])};return e.find((function(e){return"measures"===e}))&&(n.measures||[]).length?n.measures.map(r):[r()]}}},{key:"axisValuesString",value:function(e,t){return e.map((function(e){return null==e?"\u2205":""===e?"[Empty string]":e})).join(t||", ")}},{key:"normalizePivotConfig",value:function(t){return e.getNormalizedPivotConfig(this.loadResponse.pivotQuery,t)}},{key:"timeSeries",value:function(t){if(!t.granularity)return null;var n=t.dateRange;if(!n){var r=Object(D.a)(Object(q.a)((function(n){return n[e.timeDimensionMember(t)]&&se(n[e.timeDimensionMember(t)])})),Object(P.a)((function(e){return!!e})))(this.timeDimensionBackwardCompatibleData());n=r.length&&[Object(E.a)(Object(T.a)((function(e){return e.toDate()})),r[0],r),Object(E.a)(Object(M.a)((function(e){return e.toDate()})),r[0],r)]||null}if(!n)return null;var a=t.dateRange?t.dateRange.find((function(e){return e.match(ue)})):!["hour","minute","second"].includes(t.granularity),i=n,s=A()(i,2),o=s[0],u=s[1],c=se.range(o,u);if(!oe[t.granularity])throw new Error("Unsupported time granularity: ".concat(t.granularity));return oe[t.granularity](a?c.snapTo("day"):c)}},{key:"pivot",value:function(t){var n=this;t=this.normalizePivotConfig(t);var r=this.loadResponse.pivotQuery,a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=le((function(e){var t=e.xValues;return n.axisValuesString(t)})),s=function(e,t){return e[t]};if(t.fillMissingDates&&1===t.x.length&&Object(F.a)(t.x,(r.timeDimensions||[]).filter((function(e){return!!e.granularity})).map((function(t){return e.timeDimensionMember(t)})))){var o=n.loadResponses.map((function(e){return n.timeSeries(e.query.timeDimensions[0])}));o[0]&&(i=function(e){var t=Object(V.a)((function(e){var t=e.xValues;return se(t[0]).format(se.HTML5_FMT.DATETIME_LOCAL_MS)}),e);return o[a].map((function(e){return[e,t[e]||[{xValues:[e],row:{}}]]}))},s=function(e,t){return e[t]||0})}var u=Object(D.a)(Object(q.a)((function(e){return n.axisValues(t.x,a)(e).map((function(t){return{xValues:t,row:e}}))})),Q.a,i)(n.timeDimensionBackwardCompatibleData(a)),c=Object(D.a)(Object(q.a)((function(e){var r=A()(e,2)[1];return Object(Q.a)(r.filter((function(e){var t=e.row;return Object.keys(t).length>0})).map((function(e){var r=e.row;return n.axisValues(t.y,a)(r)})))})),Q.a,L.a)(u);return u.map((function(r){var i=A()(r,2)[1],o=i[0].xValues,u=Object(D.a)(Object(q.a)((function(e){var r=e.row;return n.axisValues(t.y,a)(r).map((function(e){return{yValues:e,row:r}}))})),Q.a,Object(V.a)((function(e){var t=e.yValues;return n.axisValuesString(t)})))(i);return{xValues:o,yValuesArray:Object(Q.a)(c.map((function(r){var a=t.x.find((function(e){return"measures"===e}))?e.measureFromAxis(o):e.measureFromAxis(r);return(u[n.axisValuesString(r)]||[{row:{}}]).map((function(e){var t=e.row;return[r,s(t,a)]}))})))}}))},i=this.loadResponses.length>1?this.loadResponses.map((function(e,t){return a(t)})):[];return i.length?this.mergePivots(i,t.joinDateRange):a()}},{key:"mergePivots",value:function(e,t){var n=e.reduce((function(e,t){return null!=e&&t.length>=e.length?e:t}),null);return n.map((function(r,a){return{xValues:t?[e.map((function(e){return e[a]&&e[a].xValues||[]})).join(", ")]:n[a].xValues,yValuesArray:Object(Q.a)(e.map((function(e){return e[a].yValuesArray})))}}))}},{key:"pivotedRows",value:function(e){return this.chartPivot(e)}},{key:"chartPivot",value:function(e){var t=this,n=new Set;this.queryType===de.BLENDING_QUERY&&Object(_.a)(this.loadResponses.map((function(e){return e.query.measures}))).filter((function(e,t,n){return n.indexOf(e)!==t})).forEach((function(e){return n.add(e)}));return this.pivot(e).map((function(r){var a=r.xValues,i=r.yValuesArray;return ie({category:t.axisValuesString(a,","),x:t.axisValuesString(a,","),xValues:a},i.map((function(r,a){var i,s=A()(r,2),o=s[0],u=s[1];return h()({},t.axisValuesString(function(t,r){return e&&e.aliasSeries&&e.aliasSeries[r]?[e.aliasSeries[r]].concat(R()(t)):n.has(t[0])?[r].concat(R()(t)):[t]}(o,a),","),u&&(i=u,t.parseDateMeasures&&ce.test(i)?new Date(i):Number.isNaN(Number.parseFloat(i))?i:Number.parseFloat(i)))})).reduce((function(e,t){return Object.assign(e,t)}),{}))}))}},{key:"tablePivot",value:function(e){var t=this.normalizePivotConfig(e||{}),n=t.x.concat(t.y).includes("measures");return this.pivot(t).map((function(e){var r=e.xValues,a=e.yValuesArray;return Object(I.a)(t.x.map((function(e,t){return[e,r[t]]})).concat(n?a.map((function(e){var t=A()(e,2),n=t[0],r=t[1];return[n.length?n.join():"value",r]})):[]))}))}},{key:"tableColumns",value:function(e){var t=this.normalizePivotConfig(e||{}),n=Object(D.a)(Object(z.a)("annotation"),Object(E.a)(Object(N.a)(),{}))(this.loadResponses),r=Object.values(n).reduce((function(e,t){return ie(ie({},e),t)}),{}),a={},i=function(e){var t=r[e]||{};return{key:e,title:t.title,shortTitle:t.shortTitle,type:t.type,format:t.format,meta:t.meta}},s=this.pivot(t);(s[0]&&s[0].yValuesArray||[]).forEach((function(e){var n=A()(e,1)[0];if(n.length>0){var r=a;n.forEach((function(e,n){r[e]={key:e,memberId:"measures"===t.y[n]?e:t.y[n],children:r[e]&&r[e].children||{}},r=r[e].children}))}}));var o=[];return!s.length&&t.y.includes("measures")&&(o=(this.loadResponses[0].query.measures||[]).map((function(e){return ie(ie({},i(e)),{},{dataIndex:e})}))),!t.y.length&&t.x.includes("measures")&&o.push({key:"value",dataIndex:"value",title:"Value",shortTitle:"Value",type:"string"}),t.x.map((function(e){return"measures"===e?{key:"measures",dataIndex:"measures",title:"Measures",shortTitle:"Measures",type:"string"}:ie(ie({},i(e)),{},{dataIndex:e})})).concat(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return 0===Object.keys(t).length?[]:Object.values(t).map((function(t){var r=t.key,a=S()(t,["key"]),s=e(a.children,[].concat(R()(n),[r])),o=i(a.memberId),u=o.title,c=o.shortTitle,l=S()(o,["title","shortTitle"]),d=r!==a.memberId||null==u?r:"";return s.length?ie(ie({},l),{},{key:r,title:[u,d].join(" ").trim(),shortTitle:d||c,children:s}):ie(ie({},l),{},{key:r,dataIndex:[].concat(R()(n),[r]).join(),title:[u,d].join(" ").trim(),shortTitle:d||c})}))}(a)).concat(o)}},{key:"totalRow",value:function(e){return this.chartPivot(e)[0]}},{key:"categories",value:function(e){return this.chartPivot(e)}},{key:"seriesNames",value:function(t){var n=this;t=this.normalizePivotConfig(t);var r=Object(D.a)(Object(z.a)("annotation"),Object(z.a)("measures"),Y.a)(this.loadResponses),a=Object(Q.a)(this.loadResponses.map((function(e,r){return Object(D.a)(Object(q.a)(n.axisValues(t.y,r)),Q.a,L.a)(n.timeDimensionBackwardCompatibleData(r))}))),i=new Set;this.queryType===de.BLENDING_QUERY&&Object(_.a)(this.loadResponses.map((function(e){return e.query.measures}))).filter((function(e,t,n){return n.indexOf(e)!==t})).forEach((function(e){return i.add(e)}));return a.map((function(a,s){var o=function(e,n){return t&&t.aliasSeries&&t.aliasSeries[n]?[t.aliasSeries[n]].concat(R()(e)):i.has(e[0])?[n].concat(R()(e)):e}(a,s);return{title:n.axisValuesString(t.y.find((function(e){return"measures"===e}))?Object(B.a)(1,o).concat(r[e.measureFromAxis(a)].title):o,", "),key:n.axisValuesString(o,","),yValues:a}}))}},{key:"query",value:function(){if(this.queryType!==de.REGULAR_QUERY)throw new Error("Method is not supported for a '".concat(this.queryType,"' query type. Please use decompose"));return this.loadResponses[0].query}},{key:"pivotQuery",value:function(){return this.loadResponse.pivotQuery||null}},{key:"rawData",value:function(){if(this.queryType!==de.REGULAR_QUERY)throw new Error("Method is not supported for a '".concat(this.queryType,"' query type. Please use decompose"));return this.loadResponses[0].data}},{key:"annotation",value:function(){if(this.queryType!==de.REGULAR_QUERY)throw new Error("Method is not supported for a '".concat(this.queryType,"' query type. Please use decompose"));return this.loadResponses[0].annotation}},{key:"timeDimensionBackwardCompatibleData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.backwardCompatibleData[t]){var n=this.loadResponses[t],r=n.data,a=n.query,i=(a.timeDimensions||[]).filter((function(e){return!!e.granularity}));this.backwardCompatibleData[t]=r.map((function(t){return ie(ie({},t),Object(I.a)(Object.keys(t).filter((function(n){return i.find((function(e){return e.dimension===n}))&&!t[e.timeDimensionMember(i.find((function(e){return e.dimension===n})))]})).map((function(n){return[e.timeDimensionMember(i.find((function(e){return e.dimension===n}))),t[n]]}))))}))}return this.backwardCompatibleData[t]}},{key:"decompose",value:function(){var t=this;return this.loadResponses.map((function(n){return new e({queryType:de.REGULAR_QUERY,pivotQuery:ie(ie({},n.query),{},{queryType:de.REGULAR_QUERY}),results:[n]},t.options)}))}},{key:"serialize",value:function(){return{loadResponse:Object(H.a)(this.loadResponse)}}}],[{key:"measureFromAxis",value:function(e){return e[e.length-1]}},{key:"timeDimensionMember",value:function(e){return"".concat(e.dimension,".").concat(e.granularity)}},{key:"deserialize",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new e(t.loadResponse,n)}},{key:"getNormalizedPivotConfig",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={x:[],y:[],fillMissingDates:!0,joinDateRange:!1},a=t.measures,i=void 0===a?[]:a,s=t.dimensions,o=void 0===s?[]:s,u=(t.timeDimensions||[]).filter((function(e){return!!e.granularity}));n=n||(u.length?{x:u.map((function(t){return e.timeDimensionMember(t)})),y:o}:{x:o,y:[]});var c=function(n){return n.map((function(n){return u.find((function(e){return e.dimension===n}))&&!o.find((function(e){return e===n}))?e.timeDimensionMember(t.timeDimensions.find((function(e){return e.dimension===n}))):n}))};(n=Object(N.a)(n,r)).x=c(n.x),n.y=c(n.y);var l=n.x.concat(n.y),d=u.map((function(t){return e.timeDimensionMember(t)})).concat(o),p=function(e){return d.includes(e)||"measures"===e};return n.x=n.x.concat(d.filter((function(e){return!l.includes(e)}))).filter(p),n.y=n.y.filter(p),n.x.concat(n.y).find((function(e){return"measures"===e}))||n.y.push("measures"),i.length||(n.x=n.x.filter((function(e){return"measures"!==e})),n.y=n.y.filter((function(e){return"measures"!==e}))),n}}]),e}();function me(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=te()(e);if(t){var a=te()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Z()(this,n)}}Error;function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(F.a)(Object.entries(e&&e.order||{}),Object.entries(t&&t.order||{}))&&Object(F.a)(e,t)}function be(e){var t=(e.timeDimensions||[]).find((function(e){return e.granularity}));return t?h()({},t.dimension,"asc"):(e.measures||[]).length>0&&(e.dimensions||[]).length>0?h()({},e.measures[0],"desc"):(e.dimensions||[]).length>0?h()({},e.dimensions[0],"asc"):{}}function ve(e){return!!e&&(Array.isArray(e)?e:[e]).every((function(e){return e.measures&&e.measures.length||e.dimensions&&e.dimensions.length||e.timeDimensions&&e.timeDimensions.length}))}function ge(e,t,n,r,a){var i=ye(ye({},e),{},{x:R()(e.x),y:R()(e.y)}),s=e[r][t],o=i[a].length-1;return"measures"===s?n=o+1:n>=o&&"measures"===i[a][o]&&(n=o-1),i[r].splice(t,1),i[a].splice(n,0,s),i}function je(e,t,n){var r=R()(e),a=r.splice(t,1),i=A()(a,1)[0];return r.splice(n,0,i),r}function xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){return t.or||t.and?[].concat(R()(e),R()(xe(t.or||t.and))):[].concat(R()(e),[t])}),[])}var Oe=n(952),Ce=n(559),Se=n(953),ke=(n(534),n(365)),Re=n.n(ke),we=Object(o.createContext)(null);function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=te()(e);if(t){var a=te()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Z()(this,n)}}var Pe=function(e){X()(n,e);var t=qe(n);function n(e){var r;return v()(this,n),(r=t.call(this,e)).state={},r.mutexObj={},r}return j()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.query,n=e.queries;t&&this.load(t),n&&this.loadQueries(n)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,r=n.query,a=n.queries,i=n.render,s=n.cubejsApi,o=n.loadSql,u=n.updateOnlyOnStateChange;return!u||(!Object(F.a)(e.query,r)||!Object(F.a)(e.queries,a)||(null==e.render||null==i)&&e.render!==i||e.cubejsApi!==s||e.loadSql!==o||!Object(F.a)(t,this.state)||e.updateOnlyOnStateChange!==u)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.query,r=t.queries;Object(F.a)(e.query,n)||this.load(n),Object(F.a)(e.queries,r)||this.loadQueries(r)}},{key:"cubejsApi",value:function(){return this.props.cubejsApi||this.context&&this.context.cubejsApi}},{key:"load",value:function(e){var t=this,r=this.props.resetResultSetOnChange;this.setState(De({isLoading:!0,error:null,sqlQuery:null},r?{resultSet:null}:{}));var a=this.props.loadSql,i=this.cubejsApi();e&&n.isQueryPresent(e)&&("only"===a?i.sql(e,{mutexObj:this.mutexObj,mutexKey:"sql"}).then((function(e){return t.setState({sqlQuery:e,error:null,isLoading:!1})})).catch((function(e){return t.setState(De(De({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))})):a?Promise.all([i.sql(e,{mutexObj:this.mutexObj,mutexKey:"sql"}),i.load(e,{mutexObj:this.mutexObj,mutexKey:"query"})]).then((function(e){var n=A()(e,2),r=n[0],a=n[1];return t.setState({sqlQuery:r,resultSet:a,error:null,isLoading:!1})})).catch((function(e){return t.setState(De(De({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))})):i.load(e,{mutexObj:this.mutexObj,mutexKey:"query"}).then((function(e){return t.setState({resultSet:e,error:null,isLoading:!1})})).catch((function(e){return t.setState(De(De({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))})))}},{key:"loadQueries",value:function(e){var t=this,n=this.cubejsApi(),r=this.props.resetResultSetOnChange;this.setState(De(De({isLoading:!0},r?{resultSet:null}:{}),{},{error:null})),Promise.all(Object(Oe.a)(e).map((function(e){var r=A()(e,2),a=r[0],i=r[1];return n.load(i,{mutexObj:t.mutexObj,mutexKey:a}).then((function(e){return[a,e]}))}))).then((function(e){return t.setState({resultSet:Object(I.a)(e),error:null,isLoading:!1})})).catch((function(e){return t.setState(De(De({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))}))}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.queries,r=e.resultSet,a=e.isLoading,i=e.sqlQuery,s=this.props.render;return s?s({error:t,resultSet:n?r||{}:r,loadingState:{isLoading:a},sqlQuery:i}):null}}],[{key:"isQueryPresent",value:function(e){return ve(e)}}]),n}(u.a.Component);Pe.contextType=we,Pe.defaultProps={cubejsApi:null,query:null,render:null,queries:null,loadSql:null,updateOnlyOnStateChange:!1,resetResultSetOnChange:!0};function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=te()(e);if(t){var a=te()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Z()(this,n)}}var Fe=[{name:void 0,title:"w/o grouping"},{name:"second",title:"Second"},{name:"minute",title:"Minute"},{name:"hour",title:"Hour"},{name:"day",title:"Day"},{name:"week",title:"Week"},{name:"month",title:"Month"},{name:"year",title:"Year"}],Ve=function(e){X()(n,e);var t=Me(n);function n(e){var r;return v()(this,n),r=t.call(this,e),h()(Re()(r),"fetchMeta",f()(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,r.setState({isFetchingMeta:!0}),e.next=5,r.cubejsApi().meta();case 5:t=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n=e.t0;case 11:r.setState({meta:t,metaError:n,isFetchingMeta:!1},(function(){r.updateQuery({})}));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))),r.state=Te(Te({query:e.defaultQuery||e.query,chartType:e.defaultChartType,validatedQuery:e.query,missingMembers:[],isFetchingMeta:!1,dryRunResponse:null},e.vizState),e.initialVizState),r.mutexObj={},r}return j()(n,[{key:"componentDidMount",value:function(){var e=f()(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchMeta();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=f()(O.a.mark((function e(t){var n,r,a,i,s,o=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.schemaVersion,a=n.onSchemaChange,i=this.state.meta,t.schemaVersion===r){e.next=13;break}return e.prev=3,e.next=6,this.cubejsApi().meta();case 6:s=e.sent,Object(F.a)(s,i)||"function"!==typeof a||a({schemaVersion:r,refresh:function(){var e=f()(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.fetchMeta();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.setState({metaError:e.t0});case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"cubejsApi",value:function(){var e=this.props.cubejsApi;return e||this.context&&this.context.cubejsApi}},{key:"getMissingMembers",value:function(e,t){return t?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=["measures","dimensions","segments"],n=new Set;return t.forEach((function(t){return(e[t]||[]).forEach((function(e){return n.add(e)}))})),(e.timeDimensions||[]).forEach((function(e){return n.add(e.dimension)})),xe(e.filters).forEach((function(e){return n.add(e.dimension||e.member)})),R()(n)}(e).map((function(e){return!!t.resolveMember(e,["measures","dimensions","segments"]).error&&e})).filter(Boolean):[]}},{key:"isQueryPresent",value:function(){var e=this.state.query;return Pe.isQueryPresent(e)}},{key:"prepareRenderProps",value:function(e){var t=this,r=function(e){return e.name},a=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return{add:function(r){var a=t.state.query;t.updateQuery(h()({},e,(a[e]||[]).concat(n(r))))},remove:function(n){var r=(t.state.query[e]||[]).concat([]);return r.splice(n.index,1),t.updateQuery(h()({},e,r))},update:function(r,a){var i=(t.state.query[e]||[]).concat([]);return i.splice(r.index,1,n(a)),t.updateQuery(h()({},e,i))}}},i=this.state,s=i.meta,o=i.metaError,u=i.query,c=i.queryError,l=i.chartType,d=i.pivotConfig,p=i.validatedQuery,m=i.missingMembers,f=i.isFetchingMeta,y=i.dryRunResponse,b=Object(Ce.a)(Object(G.a)("member"),xe(s&&u.filters||[]).map((function(e){return Te(Te({},e),{},{member:e.member||e.dimension})}))).map((function(e,t){return Te(Te({},e),{},{dimension:s.resolveMember(e.member||e.dimension,["dimensions","measures"]),operators:s.filterOperatorsForMember(e.member||e.dimension,["dimensions","measures"]),index:t})})),v=n.resolveMember("measures",this.state),g=n.resolveMember("dimensions",this.state),j=n.resolveMember("timeDimensions",this.state),x=(s&&u.segments||[]).map((function(e,t){return Te({index:t},s.resolveMember(e,"segments"))})),O=s?s.membersForQuery(u,"measures"):[],C=s?s.membersForQuery(u,"dimensions"):[],S=s?s.membersForQuery(u,"segments"):[],k=Object(Ce.a)(Object(G.a)("id"),[].concat(R()((Array.isArray(u.order)?u.order:Object.entries(u.order||{})).map((function(e){var t=A()(e,2),n=t[0];return{id:n,order:t[1],title:s?s.resolveMember(n,["measures","dimensions"]).title:""}}))),R()([].concat(R()(v),R()(g)).map((function(e){return{id:e.name,title:e.title,order:"none"}}))))),w=JSON.stringify(k.map((function(e){return e.id})).sort());return this.orderMemberOrderKey&&this.orderMemberOrder&&w===this.orderMemberOrderKey?k=this.orderMemberOrder.map((function(e){return k.find((function(t){return t.id===e}))})):(this.orderMemberOrderKey=w,this.orderMemberOrder=k.map((function(e){return e.id}))),Te({meta:s,metaError:o,query:u,error:c,validatedQuery:p,isQueryPresent:this.isQueryPresent(),chartType:l,measures:v,dimensions:g,timeDimensions:j,segments:x,filters:b,orderMembers:k,availableMeasures:O,availableDimensions:C,availableTimeDimensions:C.filter((function(e){return"time"===e.type})),availableSegments:S,updateQuery:function(e){return t.updateQuery(e)},updateMeasures:a("measures"),updateDimensions:a("dimensions"),updateSegments:a("segments"),updateTimeDimensions:a("timeDimensions",(function(e){var t=e.compareDateRange?{compareDateRange:e.compareDateRange}:{dateRange:e.dateRange};return Te({dimension:e.dimension.name,granularity:e.granularity},t)})),updateFilters:a("filters",(function(e){var t,n;return{member:(null===(t=e.member)||void 0===t?void 0:t.name)||(null===(n=e.dimension)||void 0===n?void 0:n.name),operator:e.operator,values:e.values}})),updateChartType:function(e){return t.updateVizState({chartType:e})},updateOrder:{set:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";t.updateQuery({order:k.map((function(t){return Te(Te({},t),{},{order:t.id===e?n:t.order})})).reduce((function(e,t){var n=t.id,r=t.order;return"none"!==r?[].concat(R()(e),[[n,r]]):e}),[])})},update:function(e){t.updateQuery({order:e})},reorder:function(e,n){null!=e&&null!=n&&t.updateQuery({order:je(k,e,n).reduce((function(e,t){var n=t.id,r=t.order;return"none"!==r?[].concat(R()(e),[[n,r]]):e}),[])})}},pivotConfig:d,updatePivotConfig:{moveItem:function(e){var n=e.sourceIndex,r=e.destinationIndex,a=e.sourceAxis,i=e.destinationAxis;t.updateVizState({pivotConfig:ge(d,n,r,a,i)})},update:function(e){var n=e.limit;t.updateVizState(Te({pivotConfig:Te(Te({},d),e)},n?{query:Te(Te({},u),{},{limit:n})}:null))}},missingMembers:m,refresh:this.fetchMeta,isFetchingMeta:f,dryRunResponse:y},e)}},{key:"updateQuery",value:function(e){var t=this.state.query;this.updateVizState({query:Te(Te({},t),e)})}},{key:"updateVizState",value:function(){var e=f()(O.a.mark((function e(t){var n,r,a,i,s,o,u,c,l,d,p,m,f,y=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.setQuery,a=n.setVizState,i=this.state,s=i.query,o=i.pivotConfig,u=i.chartType,c=i.meta,(l=this.applyStateChangeHeuristics(t)).query||(l.query=Te({},s)),d=null,p=function(e){var t=y.props.onVizStateChanged;if(t){var n=Object(Se.a)(["chartType","pivotConfig","query"],e);d&&Object(F.a)(d,n)||(t(n),d=Object(H.a)(n))}},m=function(e){a&&a(Object(Se.a)(["chartType","pivotConfig","query"],e)),e.query&&r&&r(e.query)},l.shouldApplyHeuristicOrder&&(l.query.order=be(l.query)),l.pivotConfig=pe.getNormalizedPivotConfig(l.query,void 0!==l.pivotConfig?l.pivotConfig:o),l.missingMembers=this.getMissingMembers(l.query,c),l.chartType=l.chartType||t.chartType||u,m(Te(Te({},t),{},{query:l.query})),this.setState(Te(Te({},l),{},{queryError:null})),p(l),!Pe.isQueryPresent(l.query)||0!==l.missingMembers.length){e.next=30;break}return e.prev=15,e.next=18,this.cubejsApi().dryRun(l.query,{mutexObj:this.mutexObj});case 18:f=e.sent,l.shouldApplyHeuristicOrder&&(l.query.order=(f.queryOrder||[]).reduce((function(e,t){return Te(Te({},e),t)}),{})),l.pivotConfig=pe.getNormalizedPivotConfig(f.pivotQuery,l.pivotConfig),l.validatedQuery=this.validatedQuery(l),l.dryRunResponse=f,Pe.isQueryPresent(s)&&m(Te(Te({},this.state),l)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(15),console.error(e.t0),this.setState({queryError:e.t0});case 30:this.setState(l,(function(){return p(y.state)}));case 31:case"end":return e.stop()}}),e,this,[[15,26]])})));return function(t){return e.apply(this,arguments)}}()},{key:"validatedQuery",value:function(e){var t=(e||this.state).query;return Te(Te({},t),{},{filters:(t.filters||[]).filter((function(e){return e.operator}))})}},{key:"defaultHeuristics",value:function(e){var t=this.state,n=t.query,r=t.sessionGranularity;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=Object(H.a)(e),a=r.query,i=S()(r,["query"]),s=n.meta,o=n.sessionGranularity||"day",u=ye({query:a},i),c=null;if(he(a,t)||(c=a),Array.isArray(c)||Array.isArray(t))return e;if(c){if(1===(t.timeDimensions||[]).length&&1===(c.timeDimensions||[]).length&&c.timeDimensions[0].granularity&&t.timeDimensions[0].granularity!==c.timeDimensions[0].granularity&&(u=ye(ye({},u),{},{sessionGranularity:c.timeDimensions[0].granularity})),0===(t.measures||[]).length&&(c.measures||[]).length>0||1===(t.measures||[]).length&&1===(c.measures||[]).length&&t.measures[0]!==c.measures[0]){var l=c.timeDimensions||[],d=A()(l,1)[0],p=s.defaultTimeDimensionNameFor(c.measures[0]);return c=ye(ye({},c),{},{timeDimensions:p?[{dimension:p,granularity:d&&d.granularity||o,dateRange:d&&d.dateRange}]:[]}),ye(ye({},u),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:c,chartType:p?"line":"number"})}return 0===(t.dimensions||[]).length&&(c.dimensions||[]).length>0?(c=ye(ye({},c),{},{timeDimensions:(c.timeDimensions||[]).map((function(e){return ye(ye({},e),{},{granularity:void 0})}))}),ye(ye({},u),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:c,chartType:"table"})):(t.dimensions||[]).length>0&&0===(c.dimensions||[]).length?(c=ye(ye({},c),{},{timeDimensions:(c.timeDimensions||[]).map((function(e){return ye(ye({},e),{},{granularity:e.granularity||o})}))}),ye(ye({},u),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:c,chartType:(c.timeDimensions||[]).length?"line":"number"})):((t.dimensions||[]).length>0||(t.measures||[]).length>0)&&0===(c.dimensions||[]).length&&0===(c.measures||[]).length?(c=ye(ye({},c),{},{timeDimensions:[],filters:[]}),ye(ye({},u),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:c,sessionGranularity:null})):u}if(u.chartType){var m=u.chartType;if(("line"===m||"area"===m)&&1===(t.timeDimensions||[]).length&&!t.timeDimensions[0].granularity){var f=A()(t.timeDimensions,1)[0];return ye(ye({},u),{},{pivotConfig:null,query:ye(ye({},t),{},{timeDimensions:[ye(ye({},f),{},{granularity:o})]})})}if(("pie"===m||"table"===m||"number"===m)&&1===(t.timeDimensions||[]).length&&t.timeDimensions[0].granularity){var y=A()(t.timeDimensions,1)[0];return ye(ye({},u),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:ye(ye({},t),{},{timeDimensions:[ye(ye({},y),{},{granularity:void 0})]})})}}return u}(e,n,{meta:t.meta,sessionGranularity:r||"day"})}},{key:"applyStateChangeHeuristics",value:function(e){var t=this.props,n=t.stateChangeHeuristics;return t.disableHeuristics?e:n&&n(this.state,e)||this.defaultHeuristics(e)}},{key:"render",value:function(){var e=this,t=this.state.query,n=this.props,r=n.cubejsApi,a=n.render;return n.wrapWithQueryRenderer?u.a.createElement(Pe,{query:t,cubejsApi:r,resetResultSetOnChange:!1,render:function(t){return a?a(e.prepareRenderProps(t)):null}}):a?a(this.prepareRenderProps()):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.query||e.vizState){var n=Te(Te({},t),e.vizState||{});if(Array.isArray(e.query))throw new Error("Array of queries is not supported.");return Te(Te({},n),{},{query:Te(Te({},n.query),e.query||{})})}return null}},{key:"resolveMember",value:function(e,t){var r=t.meta,a=t.query;return r?Array.isArray(a)?a.reduce((function(t,a){return t.concat(n.resolveMember(e,{meta:r,query:a}))}),[]):"timeDimensions"===e?(a.timeDimensions||[]).map((function(e,t){return Te(Te({},e),{},{dimension:Te(Te({},r.resolveMember(e.dimension,"dimensions")),{},{granularities:Fe}),index:t})})):(a[e]||[]).map((function(t,n){return Te({index:n},r.resolveMember(t,e))})):[]}}]),n}(u.a.Component);Ve.contextType=we,Ve.defaultProps={cubejsApi:null,stateChangeHeuristics:null,disableHeuristics:!1,render:null,wrapWithQueryRenderer:!0,defaultChartType:"line",defaultQuery:{},initialVizState:null,onVizStateChanged:null,query:null,setQuery:null,vizState:null,setVizState:null};var Qe=function(e){var t=e.cubejsApi,n=e.children;return u.a.createElement(we.Provider,{value:{cubejsApi:t}},n)};function Le(e){var t=Object(o.useRef)([]);return Object(F.a)(e,t.current)||(t.current=e),t.current}n(790),n(791);var _e=n(558),Ie=["import React from 'react';","import { Chart, Axis, Tooltip, Geom, PieChart } from 'bizcharts';","import { Row, Col, Statistic, Table } from 'antd';"];function ze(e){return"line"===e?'return (\n  <Chart\n    scale={{\n      x: {\n        tickCount: 8,\n      },\n    }}\n    autoFit\n    height={400}\n    data={stackedChartData(resultSet)}\n    forceFit\n  >\n    <Axis name="x" />\n    <Axis name="measure" />\n    <Tooltip\n      crosshairs={{\n        type: \'y\',\n      }}\n    />\n    <Geom type="line" position="x*measure" size={2} color="color" />\n  </Chart>\n);\n':"x"===e||"tickCount"===e||"type"===e?"":"bar"===e?'return (\n  <Chart\n    scale={{\n      x: {\n        tickCount: 8,\n      },\n    }}\n    autoFit\n    height={400}\n    data={stackedChartData(resultSet)}\n    forceFit\n  >\n    <Axis name="x" />\n    <Axis name="measure" />\n    <Tooltip />\n    <Geom type="interval" position="x*measure" color="color" />\n  </Chart>\n);\n':"x"===e||"tickCount"===e?"":"area"===e?'return (\n  <Chart\n    scale={{\n      x: {\n        tickCount: 8,\n      },\n    }}\n    autoFit\n    height={400}\n    data={stackedChartData(resultSet)}\n    forceFit\n  >\n    <Axis name="x" />\n    <Axis name="measure" />\n    <Tooltip\n      crosshairs={{\n        type: \'y\',\n      }}\n    />\n    <Geom\n      type="area"\n      adjust="stack"\n      position="x*measure"\n      size={2}\n      color="color"\n    />\n  </Chart>\n);\n':"x"===e||"tickCount"===e||"type"===e?"":"pie"===e?"return (\n  <PieChart\n    data={resultSet.chartPivot()}\n    radius={0.8}\n    angleField={resultSet.series()[0].key}\n    colorField=\"x\"\n    label={{\n      visible: true,\n      offset: 20,\n    }}\n    legend={{\n      position: 'bottom',\n    }}\n  />\n);\n":"visible"===e||"offset"===e||"position"===e?"":"number"===e?'return (\n  <Row\n    type="flex"\n    justify="center"\n    align="middle"\n    style={{\n      height: \'100%\',\n    }}\n  >\n    <Col>\n      {resultSet.seriesNames().map((s) => (\n        <Statistic value={resultSet.totalRow()[s.key]} />\n      ))}\n    </Col>\n  </Row>\n);\n':"height"===e?"":"table"===e?"return (\n  <Table\n    pagination={false}\n    columns={resultSet.tableColumns(pivotConfig)}\n    dataSource={resultSet.tablePivot(pivotConfig)}\n  />\n);\n":void 0}function Ne(){return"const stackedChartData = (resultSet) => {\n  const data = resultSet\n    .pivot()\n    .map(({ xValues, yValuesArray }) =>\n      yValuesArray.map(([yValues, m]) => ({\n        x: resultSet.axisValuesString(xValues, ', '),\n        color: resultSet.axisValuesString(yValues, ', '),\n        measure: m && Number.parseFloat(m),\n      }))\n    )\n    .reduce((a, b) => a.concat(b), []);\n  return data;\n};\n"}function Ye(){return Ie}var Be=["import React from 'react';","import { CartesianGrid, PieChart, Pie, Cell, AreaChart, Area, XAxis, YAxis, Tooltip, ResponsiveContainer, Legend, BarChart, Bar, LineChart, Line } from 'recharts';","import { Row, Col, Statistic, Table } from 'antd';"];function He(e){return"line"===e?'return (\n  <CartesianChart resultSet={resultSet} ChartComponent={LineChart}>\n    {resultSet.seriesNames().map((series, i) => (\n      <Line\n        key={series.key}\n        stackId="a"\n        dataKey={series.key}\n        name={series.title}\n        stroke={colors[i]}\n      />\n    ))}\n  </CartesianChart>\n);\n':"bar"===e?'return (\n  <CartesianChart resultSet={resultSet} ChartComponent={BarChart}>\n    {resultSet.seriesNames().map((series, i) => (\n      <Bar\n        key={series.key}\n        stackId="a"\n        dataKey={series.key}\n        name={series.title}\n        fill={colors[i]}\n      />\n    ))}\n  </CartesianChart>\n);\n':"area"===e?'return (\n  <CartesianChart resultSet={resultSet} ChartComponent={AreaChart}>\n    {resultSet.seriesNames().map((series, i) => (\n      <Area\n        key={series.key}\n        stackId="a"\n        dataKey={series.key}\n        name={series.title}\n        stroke={colors[i]}\n        fill={colors[i]}\n      />\n    ))}\n  </CartesianChart>\n);\n':"pie"===e?'return (\n  <ResponsiveContainer width="100%" height={350}>\n    <PieChart>\n      <Pie\n        isAnimationActive={false}\n        data={resultSet.chartPivot()}\n        nameKey="x"\n        dataKey={resultSet.seriesNames()[0].key}\n        fill="#8884d8"\n      >\n        {resultSet.chartPivot().map((e, index) => (\n          <Cell key={index} fill={colors[index % colors.length]} />\n        ))}\n      </Pie>\n      <Legend />\n      <Tooltip />\n    </PieChart>\n  </ResponsiveContainer>\n);\n':"number"===e?'return (\n  <Row\n    type="flex"\n    justify="center"\n    align="middle"\n    style={{\n      height: \'100%\',\n    }}\n  >\n    <Col>\n      {resultSet.seriesNames().map((s) => (\n        <Statistic value={resultSet.totalRow()[s.key]} />\n      ))}\n    </Col>\n  </Row>\n);\n':"height"===e?"":"table"===e?"return (\n  <Table\n    pagination={false}\n    columns={resultSet.tableColumns(pivotConfig)}\n    dataSource={resultSet.tablePivot(pivotConfig)}\n  />\n);\n":void 0}function Ge(){return"const CartesianChart = ({ resultSet, children, ChartComponent }) => (\n  <ResponsiveContainer width=\"100%\" height={350}>\n    <ChartComponent data={resultSet.chartPivot()}>\n      <XAxis dataKey=\"x\" />\n      <YAxis />\n      <CartesianGrid />\n      {children}\n      <Legend />\n      <Tooltip />\n    </ChartComponent>\n  </ResponsiveContainer>\n);\n\nconst colors = ['#FF6492', '#141446', '#7A77FF'];\n\nconst stackedChartData = (resultSet) => {\n  const data = resultSet\n    .pivot()\n    .map(({ xValues, yValuesArray }) =>\n      yValuesArray.map(([yValues, m]) => ({\n        x: resultSet.axisValuesString(xValues, ', '),\n        color: resultSet.axisValuesString(yValues, ', '),\n        measure: m && Number.parseFloat(m),\n      }))\n    )\n    .reduce((a, b) => a.concat(b), []);\n  return data;\n};\n"}function Ue(){return Be}var Ke=["import React from 'react';","import { Line, Bar, Pie } from 'react-chartjs-2';","import { Row, Col, Statistic, Table } from 'antd';"];function We(e){return"line"===e?"const data = {\n  labels: resultSet.categories().map((c) => c.category),\n  datasets: resultSet.series().map((s, index) => ({\n    label: s.title,\n    data: s.series.map((r) => r.value),\n    borderColor: COLORS_SERIES[index],\n    fill: false,\n  })),\n};\nconst options = { ...commonOptions };\nreturn <Line data={data} options={options} />;\n":"labels"===e||"datasets"===e||"label"===e||"data"===e||"borderColor"===e||"fill"===e?"":"bar"===e?"const data = {\n  labels: resultSet.categories().map((c) => c.category),\n  datasets: resultSet.series().map((s, index) => ({\n    label: s.title,\n    data: s.series.map((r) => r.value),\n    backgroundColor: COLORS_SERIES[index],\n    fill: false,\n  })),\n};\nconst options = {\n  ...commonOptions,\n  scales: {\n    xAxes: [\n      {\n        stacked: true,\n      },\n    ],\n  },\n};\nreturn <Bar data={data} options={options} />;\n":"labels"===e||"datasets"===e||"label"===e||"data"===e||"backgroundColor"===e||"fill"===e||"scales"===e||"xAxes"===e||"stacked"===e?"":"area"===e?"const data = {\n  labels: resultSet.categories().map((c) => c.category),\n  datasets: resultSet.series().map((s, index) => ({\n    label: s.title,\n    data: s.series.map((r) => r.value),\n    backgroundColor: COLORS_SERIES[index],\n  })),\n};\nconst options = {\n  ...commonOptions,\n  scales: {\n    yAxes: [\n      {\n        stacked: true,\n      },\n    ],\n  },\n};\nreturn <Line data={data} options={options} />;\n":"labels"===e||"datasets"===e||"label"===e||"data"===e||"backgroundColor"===e||"scales"===e||"yAxes"===e||"stacked"===e?"":"pie"===e?"const data = {\n  labels: resultSet.categories().map((c) => c.category),\n  datasets: resultSet.series().map((s) => ({\n    label: s.title,\n    data: s.series.map((r) => r.value),\n    backgroundColor: COLORS_SERIES,\n    hoverBackgroundColor: COLORS_SERIES,\n  })),\n};\nconst options = { ...commonOptions };\nreturn <Pie data={data} options={options} />;\n":"labels"===e||"datasets"===e||"label"===e||"data"===e||"backgroundColor"===e||"hoverBackgroundColor"===e?"":"number"===e?'return (\n  <Row\n    type="flex"\n    justify="center"\n    align="middle"\n    style={{\n      height: \'100%\',\n    }}\n  >\n    <Col>\n      {resultSet.seriesNames().map((s) => (\n        <Statistic value={resultSet.totalRow()[s.key]} />\n      ))}\n    </Col>\n  </Row>\n);\n':"height"===e?"":"table"===e?"return (\n  <Table\n    pagination={false}\n    columns={resultSet.tableColumns(pivotConfig)}\n    dataSource={resultSet.tablePivot(pivotConfig)}\n  />\n);\n":void 0}function Je(){return"const COLORS_SERIES = ['#FF6492', '#141446', '#7A77FF'];\nconst commonOptions = {\n  maintainAspectRatio: false,\n};\n"}function Xe(){return Ke}var $e=["import React from 'react';","import * as d3 from 'd3';","import { Row, Col, Statistic, Table } from 'antd';"];function Ze(e){return"line"===e?'return <D3Chart type="line" {...props} />;\n':"bar"===e?'return <D3Chart type="bar" {...props} />;\n':"area"===e?'return <D3Chart type="area" {...props} />;\n':"pie"===e?'return <D3Chart type="pie" {...props} />;\n':"number"===e?'return (\n  <Row\n    type="flex"\n    justify="center"\n    align="middle"\n    style={{\n      height: \'100%\',\n    }}\n  >\n    <Col>\n      {resultSet.seriesNames().map((s) => (\n        <Statistic value={resultSet.totalRow()[s.key]} />\n      ))}\n    </Col>\n  </Row>\n);\n':"height"===e?"":"table"===e?"return (\n  <Table\n    pagination={false}\n    columns={resultSet.tableColumns(pivotConfig)}\n    dataSource={resultSet.tablePivot(pivotConfig)}\n  />\n);\n":void 0}function et(){return"const COLORS_SERIES = [\n  '#7A77FF',\n  '#141446',\n  '#FF6492',\n  '#727290',\n  '#43436B',\n  '#BEF3BE',\n  '#68B68C',\n  '#FFE7AA',\n  '#B2A58D',\n  '#64C8E0',\n];\nconst CHART_HEIGHT = 300;\n\nconst drawPieChart = (node, resultSet, options) => {\n  const data = resultSet.series()[0].series.map((s) => s.value);\n  const data_ready = d3.pie()(data);\n  d3.select(node).html(''); // The radius of the pieplot is half the width or half the height (smallest one).\n\n  const radius = CHART_HEIGHT / 2 - 40; // Seprate container to center align pie chart\n\n  const svg = d3\n    .select(node)\n    .append('svg')\n    .attr('width', node.clientWidth)\n    .attr('height', CHART_HEIGHT)\n    .append('g')\n    .attr(\n      'transform',\n      'translate(' + node.clientWidth / 2 + ',' + CHART_HEIGHT / 2 + ')'\n    );\n  svg\n    .selectAll('pieArcs')\n    .data(data_ready)\n    .enter()\n    .append('path')\n    .attr('d', d3.arc().innerRadius(0).outerRadius(radius))\n    .attr('fill', (d) => COLORS_SERIES[d.index]);\n  const size = 12;\n  const labels = resultSet.series()[0].series.map((s) => s.x);\n  svg\n    .selectAll('myrect')\n    .data(labels)\n    .enter()\n    .append('rect')\n    .attr('x', 150)\n    .attr('y', function (d, i) {\n      return -50 + i * (size + 5);\n    })\n    .attr('width', size)\n    .attr('height', size)\n    .style('fill', (d, i) => COLORS_SERIES[i]);\n  svg\n    .selectAll('mylabels')\n    .data(labels)\n    .enter()\n    .append('text')\n    .attr('x', 150 + size * 1.2)\n    .attr('y', function (d, i) {\n      return -50 + i * (size + 5) + size / 2;\n    })\n    .text(function (d) {\n      return d;\n    })\n    .attr('text-anchor', 'left')\n    .attr('font-size', '12px')\n    .style('alignment-baseline', 'middle');\n};\n\nconst drawChart = (node, resultSet, chartType, options = {}) => {\n  if (chartType === 'pie') {\n    return drawPieChart(node, resultSet, options);\n  }\n\n  const margin = {\n      top: 10,\n      right: 30,\n      bottom: 30,\n      left: 60,\n    },\n    width = node.clientWidth - margin.left - margin.right,\n    height = CHART_HEIGHT - margin.top - margin.bottom;\n  d3.select(node).html('');\n  const svg = d3\n    .select(node)\n    .append('svg')\n    .attr('width', width + margin.left + margin.right)\n    .attr('height', height + margin.top + margin.bottom)\n    .append('g')\n    .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n  const keys = resultSet.seriesNames(options.pivotConfig).map((s) => s.key);\n  let data, maxData;\n\n  if (chartType === 'line') {\n    data = resultSet.series(options.pivotConfig).map((series) => ({\n      key: series.key,\n      values: series.series,\n    }));\n    maxData = d3.max(data.map((s) => d3.max(s.values, (i) => i.value)));\n  } else {\n    data = d3.stack().keys(keys)(resultSet.chartPivot(options.pivotConfig));\n    maxData = d3.max(data.map((s) => d3.max(s, (i) => i[1])));\n  }\n\n  const color = d3.scaleOrdinal().domain(keys).range(COLORS_SERIES);\n  let x;\n\n  if (chartType === 'bar') {\n    x = d3\n      .scaleBand()\n      .range([0, width])\n      .domain(resultSet.chartPivot(options.pivotConfig).map((c) => c.x))\n      .padding(0.3);\n  } else {\n    x = d3\n      .scaleTime()\n      .domain(\n        d3.extent(resultSet.chartPivot(options.pivotConfig), (c) =>\n          d3.isoParse(c.x)\n        )\n      )\n      .nice()\n      .range([0, width]);\n  }\n\n  svg\n    .append('g')\n    .attr('transform', 'translate(0,' + height + ')')\n    .call(d3.axisBottom(x));\n  const y = d3.scaleLinear().domain([0, maxData]).range([height, 0]);\n  svg.append('g').call(d3.axisLeft(y));\n\n  if (chartType === 'line') {\n    svg\n      .selectAll('.line')\n      .data(data)\n      .enter()\n      .append('path')\n      .attr('fill', 'none')\n      .attr('stroke', (d) => color(d.key))\n      .attr('stroke-width', 1.5)\n      .attr('d', (d) => {\n        return d3\n          .line()\n          .x((d) => x(d3.isoParse(d.x)))\n          .y((d) => y(+d.value))(d.values);\n      });\n  } else if (chartType === 'area') {\n    svg\n      .selectAll('mylayers')\n      .data(data)\n      .enter()\n      .append('path')\n      .style('fill', (d) => color(d.key))\n      .attr(\n        'd',\n        d3\n          .area()\n          .x((d) => x(d3.isoParse(d.data.x)))\n          .y0((d) => y(d[0]))\n          .y1((d) => y(d[1]))\n      );\n  } else {\n    svg\n      .append('g')\n      .selectAll('g') // Enter in the stack data = loop key per key = group per group\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('fill', (d) => color(d.key))\n      .selectAll('rect') // enter a second time = loop subgroup per subgroup to add all rectangles\n      .data((d) => d)\n      .enter()\n      .append('rect')\n      .attr('x', (d) => x(d.data.x))\n      .attr('y', (d) => y(d[1]))\n      .attr('height', (d) => y(d[0]) - y(d[1]))\n      .attr('width', x.bandwidth());\n  }\n};\n\nconst D3Chart = ({ resultSet, type, ...props }) => (\n  <div ref={(el) => el && drawChart(el, resultSet, type, props)} />\n);\n"}function tt(){return $e}var nt={bizchartsCharts:r,rechartsCharts:a,chartjsCharts:i,d3Charts:s},rt=["react-dom",["@cubejs-client/core","^0.26.45"],["@cubejs-client/react","^0.26.45"],"antd"];var at=n(8),it=function(e){var t=e.renderFunction,n=e.query,r=e.pivotConfig,a=e.refetchCounter,i=window.parent.window.__cubejsPlayground||{},s=i.onQueryStart,u=i.onQueryLoad,c=i.onQueryProgress,l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(o.useRef)({}),r=Object(o.useRef)(!0),a=Object(o.useState)(null),i=A()(a,2),s=i[0],u=i[1],c=Object(o.useState)(!1),l=A()(c,2),d=l[0],p=l[1],m=Object(o.useState)(null),y=A()(m,2),h=y[0],b=y[1],v=Object(o.useState)(null),g=A()(v,2),j=g[0],x=g[1],C=Object(o.useState)(null),S=A()(C,2),k=S[0],R=S[1],w=Object(o.useContext)(we),D=null,q=function(e){var t=e.progressResponse;return x(t)};function P(){return E.apply(this,arguments)}function E(){return(E=f()(O.a.mark((function a(){var i,s,o;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=t.resetResultSetOnChange,s=t.cubejsApi||(null===w||void 0===w?void 0:w.cubejsApi)){a.next=4;break}throw new Error("Cube.js API client is not provided");case 4:return i&&b(null),R(null),p(!0),a.prev=7,a.next=10,s.load(e,{mutexObj:n.current,mutexKey:"query",progressCallback:q});case 10:o=a.sent,r.current&&(b(o),x(null)),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(7),r.current&&(R(a.t0),b(null),x(null));case 17:r.current&&p(!1);case 18:case"end":return a.stop()}}),a,null,[[7,14]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){return function(){r.current=!1}}),[]),Object(o.useEffect)((function(){var a=t.skip,i=void 0!==a&&a,o=t.resetResultSetOnChange,c=t.cubejsApi||(null===w||void 0===w?void 0:w.cubejsApi);if(!c)throw new Error("Cube.js API client is not provided");function l(){return(l=f()(O.a.mark((function a(){return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i||!ve(e)){a.next=20;break}if(he(s,e)||((null==o||o)&&b(null),u(e)),R(null),p(!0),a.prev=4,!D){a.next=9;break}return a.next=8,D.unsubscribe();case 8:D=null;case 9:if(!t.subscribe){a.next=13;break}D=c.subscribe(e,{mutexObj:n.current,mutexKey:"query",progressCallback:q},(function(e,t){r.current&&(e?R(e):b(t),p(!1),x(null))})),a.next=15;break;case 13:return a.next=15,P();case 15:a.next=20;break;case 17:a.prev=17,a.t0=a.catch(4),r.current&&(R(a.t0),b(null),p(!1),x(null));case 20:case"end":return a.stop()}}),a,null,[[4,17]])})))).apply(this,arguments)}return function(){l.apply(this,arguments)}(),function(){D&&(D.unsubscribe(),D=null)}}),Le([e,Object.keys(e&&e.order||{}),t,w])),{isLoading:d,resultSet:h,error:k,progress:j,previousQuery:s,refetch:P}}(n),d=l.isLoading,p=l.error,m=l.resultSet,y=l.progress,h=l.refetch;return Object(o.useEffect)((function(){d&&"function"===typeof s&&s()}),[d]),Object(o.useEffect)((function(){a>0&&h()}),[a]),Object(o.useEffect)((function(){d||"function"!==typeof u||u({resultSet:m,error:p}),"function"===typeof c&&c(y)}),[p,d,m,y]),!m||p?null:t({resultSet:m,pivotConfig:r})},st=function(e){var t=e.renderFunction,n=e.query,r=e.pivotConfig,a=void 0===r?null:r,i=e.refetchCounter;return Object(at.jsx)(it,{renderFunction:t,query:n,pivotConfig:a,refetchCounter:i})},ot=n(60),ut=n(961),ct=n(967),lt=n(956),dt=n(955),pt=function(e){return e.pivot().map((function(t){var n=t.xValues;return t.yValuesArray.map((function(t){var r=Object(d.a)(t,2),a=r[0],i=r[1];return{x:e.axisValuesString(n,", "),color:e.axisValuesString(a,", "),measure:i&&Number.parseFloat(i)}}))})).reduce((function(e,t){return e.concat(t)}),[])},mt={line:function(e){var t=e.resultSet;return Object(at.jsxs)(ot.Chart,{scale:{x:{tickCount:8}},autoFit:!0,height:400,data:pt(t),forceFit:!0,children:[Object(at.jsx)(ot.Axis,{name:"x"}),Object(at.jsx)(ot.Axis,{name:"measure"}),Object(at.jsx)(ot.Tooltip,{crosshairs:{type:"y"}}),Object(at.jsx)(ot.Geom,{type:"line",position:"x*measure",size:2,color:"color"})]})},bar:function(e){var t=e.resultSet;return Object(at.jsxs)(ot.Chart,{scale:{x:{tickCount:8}},autoFit:!0,height:400,data:pt(t),forceFit:!0,children:[Object(at.jsx)(ot.Axis,{name:"x"}),Object(at.jsx)(ot.Axis,{name:"measure"}),Object(at.jsx)(ot.Tooltip,{}),Object(at.jsx)(ot.Geom,{type:"interval",position:"x*measure",color:"color"})]})},area:function(e){var t=e.resultSet;return Object(at.jsxs)(ot.Chart,{scale:{x:{tickCount:8}},autoFit:!0,height:400,data:pt(t),forceFit:!0,children:[Object(at.jsx)(ot.Axis,{name:"x"}),Object(at.jsx)(ot.Axis,{name:"measure"}),Object(at.jsx)(ot.Tooltip,{crosshairs:{type:"y"}}),Object(at.jsx)(ot.Geom,{type:"area",adjust:"stack",position:"x*measure",size:2,color:"color"})]})},pie:function(e){var t=e.resultSet;return Object(at.jsx)(ot.PieChart,{data:t.chartPivot(),radius:.8,angleField:t.series()[0].key,colorField:"x",label:{visible:!0,offset:20},legend:{position:"bottom"}})},number:function(e){var t=e.resultSet;return Object(at.jsx)(ut.a,{type:"flex",justify:"center",align:"middle",style:{height:"100%"},children:Object(at.jsx)(ct.a,{children:t.seriesNames().map((function(e){return Object(at.jsx)(lt.a,{value:t.totalRow()[e.key]})}))})})},table:function(e){var t=e.resultSet,n=e.pivotConfig;return Object(at.jsx)(dt.a,{pagination:!1,columns:t.tableColumns(n),dataSource:t.tablePivot(n)})}},ft=n(51),yt=function(e){var t=e.resultSet,n=e.children,r=e.ChartComponent;return Object(at.jsx)(ft.l,{width:"100%",height:350,children:Object(at.jsxs)(r,{data:t.chartPivot(),children:[Object(at.jsx)(ft.n,{dataKey:"x"}),Object(at.jsx)(ft.o,{}),Object(at.jsx)(ft.e,{}),n,Object(at.jsx)(ft.g,{}),Object(at.jsx)(ft.m,{})]})})},ht=["#FF6492","#141446","#7A77FF"],bt={line:function(e){var t=e.resultSet;return Object(at.jsx)(yt,{resultSet:t,ChartComponent:ft.i,children:t.seriesNames().map((function(e,t){return Object(at.jsx)(ft.h,{stackId:"a",dataKey:e.key,name:e.title,stroke:ht[t]},e.key)}))})},bar:function(e){var t=e.resultSet;return Object(at.jsx)(yt,{resultSet:t,ChartComponent:ft.d,children:t.seriesNames().map((function(e,t){return Object(at.jsx)(ft.c,{stackId:"a",dataKey:e.key,name:e.title,fill:ht[t]},e.key)}))})},area:function(e){var t=e.resultSet;return Object(at.jsx)(yt,{resultSet:t,ChartComponent:ft.b,children:t.seriesNames().map((function(e,t){return Object(at.jsx)(ft.a,{stackId:"a",dataKey:e.key,name:e.title,stroke:ht[t],fill:ht[t]},e.key)}))})},pie:function(e){var t=e.resultSet;return Object(at.jsx)(ft.l,{width:"100%",height:350,children:Object(at.jsxs)(ft.k,{children:[Object(at.jsx)(ft.j,{isAnimationActive:!1,data:t.chartPivot(),nameKey:"x",dataKey:t.seriesNames()[0].key,fill:"#8884d8",children:t.chartPivot().map((function(e,t){return Object(at.jsx)(ft.f,{fill:ht[t%ht.length]},t)}))}),Object(at.jsx)(ft.g,{}),Object(at.jsx)(ft.m,{})]})})},number:function(e){var t=e.resultSet;return Object(at.jsx)(ut.a,{type:"flex",justify:"center",align:"middle",style:{height:"100%"},children:Object(at.jsx)(ct.a,{children:t.seriesNames().map((function(e){return Object(at.jsx)(lt.a,{value:t.totalRow()[e.key]})}))})})},table:function(e){var t=e.resultSet,n=e.pivotConfig;return Object(at.jsx)(dt.a,{pagination:!1,columns:t.tableColumns(n),dataSource:t.tablePivot(n)})}},vt=n(81),gt=n(212),jt=["#FF6492","#141446","#7A77FF"],xt={maintainAspectRatio:!1},Ot={line:function(e){var t=e.resultSet,n={labels:t.categories().map((function(e){return e.category})),datasets:t.series().map((function(e,t){return{label:e.title,data:e.series.map((function(e){return e.value})),borderColor:jt[t],fill:!1}}))},r=Object(vt.a)({},xt);return Object(at.jsx)(gt.Line,{data:n,options:r})},bar:function(e){var t=e.resultSet,n={labels:t.categories().map((function(e){return e.category})),datasets:t.series().map((function(e,t){return{label:e.title,data:e.series.map((function(e){return e.value})),backgroundColor:jt[t],fill:!1}}))},r=Object(vt.a)(Object(vt.a)({},xt),{},{scales:{xAxes:[{stacked:!0}]}});return Object(at.jsx)(gt.Bar,{data:n,options:r})},area:function(e){var t=e.resultSet,n={labels:t.categories().map((function(e){return e.category})),datasets:t.series().map((function(e,t){return{label:e.title,data:e.series.map((function(e){return e.value})),backgroundColor:jt[t]}}))},r=Object(vt.a)(Object(vt.a)({},xt),{},{scales:{yAxes:[{stacked:!0}]}});return Object(at.jsx)(gt.Line,{data:n,options:r})},pie:function(e){var t=e.resultSet,n={labels:t.categories().map((function(e){return e.category})),datasets:t.series().map((function(e){return{label:e.title,data:e.series.map((function(e){return e.value})),backgroundColor:jt,hoverBackgroundColor:jt}}))},r=Object(vt.a)({},xt);return Object(at.jsx)(gt.Pie,{data:n,options:r})},number:function(e){var t=e.resultSet;return Object(at.jsx)(ut.a,{type:"flex",justify:"center",align:"middle",style:{height:"100%"},children:Object(at.jsx)(ct.a,{children:t.seriesNames().map((function(e){return Object(at.jsx)(lt.a,{value:t.totalRow()[e.key]})}))})})},table:function(e){var t=e.resultSet,n=e.pivotConfig;return Object(at.jsx)(dt.a,{pagination:!1,columns:t.tableColumns(n),dataSource:t.tablePivot(n)})}},Ct=n(562),St=n(43),kt=["#7A77FF","#141446","#FF6492","#727290","#43436B","#BEF3BE","#68B68C","#FFE7AA","#B2A58D","#64C8E0"],Rt=300,wt=function(e,t,n){var r=t.series()[0].series.map((function(e){return e.value})),a=St.i()(r);St.n(e).html("");var i=St.n(e).append("svg").attr("width",e.clientWidth).attr("height",Rt).append("g").attr("transform","translate("+e.clientWidth/2+",150)");i.selectAll("pieArcs").data(a).enter().append("path").attr("d",St.a().innerRadius(0).outerRadius(110)).attr("fill",(function(e){return kt[e.index]}));var s=12,o=t.series()[0].series.map((function(e){return e.x}));i.selectAll("myrect").data(o).enter().append("rect").attr("x",150).attr("y",(function(e,t){return 17*t-50})).attr("width",s).attr("height",s).style("fill",(function(e,t){return kt[t]})),i.selectAll("mylabels").data(o).enter().append("text").attr("x",164.4).attr("y",(function(e,t){return 17*t-50+6})).text((function(e){return e})).attr("text-anchor","left").attr("font-size","12px").style("alignment-baseline","middle")},At=function(e){var t=e.resultSet,n=e.type,r=Object(Ct.a)(e,["resultSet","type"]);return Object(at.jsx)("div",{ref:function(e){return e&&function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("pie"===n)return wt(e,t);var a={top:10,right:30,bottom:30,left:60},i=e.clientWidth-a.left-a.right,s=Rt-a.top-a.bottom;St.n(e).html("");var o,u,c=St.n(e).append("svg").attr("width",i+a.left+a.right).attr("height",s+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")"),l=t.seriesNames(r.pivotConfig).map((function(e){return e.key}));"line"===n?(o=t.series(r.pivotConfig).map((function(e){return{key:e.key,values:e.series}})),u=St.h(o.map((function(e){return St.h(e.values,(function(e){return e.value}))})))):(o=St.o().keys(l)(t.chartPivot(r.pivotConfig)),u=St.h(o.map((function(e){return St.h(e,(function(e){return e[1]}))}))));var d,p=St.l().domain(l).range(kt);d="bar"===n?St.j().range([0,i]).domain(t.chartPivot(r.pivotConfig).map((function(e){return e.x}))).padding(.3):St.m().domain(St.e(t.chartPivot(r.pivotConfig),(function(e){return St.f(e.x)}))).nice().range([0,i]),c.append("g").attr("transform","translate(0,"+s+")").call(St.c(d));var m=St.k().domain([0,u]).range([s,0]);c.append("g").call(St.d(m)),"line"===n?c.selectAll(".line").data(o).enter().append("path").attr("fill","none").attr("stroke",(function(e){return p(e.key)})).attr("stroke-width",1.5).attr("d",(function(e){return St.g().x((function(e){return d(St.f(e.x))})).y((function(e){return m(+e.value)}))(e.values)})):"area"===n?c.selectAll("mylayers").data(o).enter().append("path").style("fill",(function(e){return p(e.key)})).attr("d",St.b().x((function(e){return d(St.f(e.data.x))})).y0((function(e){return m(e[0])})).y1((function(e){return m(e[1])}))):c.append("g").selectAll("g").data(o).enter().append("g").attr("fill",(function(e){return p(e.key)})).selectAll("rect").data((function(e){return e})).enter().append("rect").attr("x",(function(e){return d(e.data.x)})).attr("y",(function(e){return m(e[1])})).attr("height",(function(e){return m(e[0])-m(e[1])})).attr("width",d.bandwidth())}(e,t,n,r)}})},Dt={line:function(e){return Object(at.jsx)(At,Object(vt.a)({type:"line"},e))},bar:function(e){return Object(at.jsx)(At,Object(vt.a)({type:"bar"},e))},area:function(e){return Object(at.jsx)(At,Object(vt.a)({type:"area"},e))},pie:function(e){return Object(at.jsx)(At,Object(vt.a)({type:"pie"},e))},number:function(e){var t=e.resultSet;return Object(at.jsx)(ut.a,{type:"flex",justify:"center",align:"middle",style:{height:"100%"},children:Object(at.jsx)(ct.a,{children:t.seriesNames().map((function(e){return Object(at.jsx)(lt.a,{value:t.totalRow()[e.key]})}))})})},table:function(e){var t=e.resultSet,n=e.pivotConfig;return Object(at.jsx)(dt.a,{pagination:!1,columns:t.tableColumns(n),dataSource:t.tablePivot(n)})}};window.__cubejsPlayground={getCodesandboxFiles:function(e,t){var n=t.query,r=t.pivotConfig,a=t.chartType,i=t.cubejsToken,s=t.apiUrl,o=nt["".concat(e,"Charts")],u=o.getCommon,c=o.getImports,l=o.getChartComponent;return{"index.js":"import ReactDOM from 'react-dom';\nimport cubejs from '@cubejs-client/core';\nimport { QueryRenderer } from '@cubejs-client/react';\nimport { Spin } from 'antd';\nimport 'antd/dist/antd.css';\n".concat(c().join("\n"),"\n\n").concat(u(),"\n\nconst cubejsApi = cubejs(\n  '").concat(i,"',\n  { apiUrl: '").concat(s,"' }\n);\n\nconst renderChart = ({ resultSet, error, pivotConfig }) => {\n  if (error) {\n    return <div>{error.toString()}</div>;\n  }\n\n  if (!resultSet) {\n    return <Spin />;\n  }\n\n  ").concat(l(a),"\n};\n\nconst ChartRenderer = () => {\n  return (\n    <QueryRenderer\n      query={").concat(n,"}\n      cubejsApi={cubejsApi}\n      resetResultSetOnChange={false}\n      render={(props) => renderChart({\n        ...props,\n        chartType: '").concat(a,"',\n        pivotConfig: ").concat(r,"\n      })}\n    />\n  );\n};\n\nconst rootElement = document.getElementById('root');\nReactDOM.render(<ChartRenderer />, rootElement);\n      ")}},getDependencies:function(e){if(!e)throw new Error("`chartingLibrary` param is undefined");var t=nt["".concat(e,"Charts")].getImports;return[].concat(rt,Object(_e.a)(t().map((function(e){var t=e.match(/['"]([^'"]+)['"]/);return Object(d.a)(t,2)[1]}))))}};var qt={bizcharts:mt,recharts:bt,chartjs:Ot,d3:Dt},Pt=function(){var e,t=Object(o.useState)(null),n=Object(d.a)(t,2),r=n[0],a=n[1],i=Object(o.useState)(null),s=Object(d.a)(i,2),u=s[0],c=s[1],l=Object(o.useState)(null),m=Object(d.a)(l,2),f=m[0],y=m[1],h=Object(o.useState)(null),b=Object(d.a)(h,2),v=b[0],g=b[1],j=Object(o.useState)(0),x=Object(d.a)(j,2),O=x[0],C=x[1],S=Object(o.useState)(0),k=Object(d.a)(S,2),R=k[0],w=k[1],A=Object(o.useMemo)((function(){var e=window.parent.window.__cubejsPlayground||{};return Object(p.a)(e.token,{apiUrl:e.apiUrl})}),[O]);return Object(o.useEffect)((function(){var e=(window.parent.window.__cubejsPlayground||{}).onChartRendererReady;"function"===typeof e&&e()}),[]),Object(o.useLayoutEffect)((function(){window.addEventListener("__cubejsPlaygroundEvent",(function(e){var t=e.detail,n=t.query,r=t.chartingLibrary,i=t.chartType,s=t.pivotConfig,o=t.eventType;"chart"===o?(n&&a(n),s&&c(s),r&&y(r),i&&("bizcharts"===r?(g(null),setTimeout((function(){return g(i)}),0)):g(i))):"credentials"===o?C((function(e){return e+1})):"refetch"===o&&w((function(e){return e+1}))}))}),[]),Object(at.jsx)(Qe,{cubejsApi:A,children:Object(at.jsx)("div",{className:"App",children:(null===(e=qt[f])||void 0===e?void 0:e[v])?Object(at.jsx)(st,{renderFunction:qt[f][v],query:r,pivotConfig:u,refetchCounter:R}):null})})},Et=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,969)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),i(e),s(e)}))};l.a.render(Object(at.jsx)(u.a.StrictMode,{children:Object(at.jsx)(Pt,{})}),document.getElementById("root")),Et()}},[[939,1,2]]]);