---
source: cubesql/src/compile/mod.rs
expression: "execute_query(r#\"\n                select\n                    cl.relname as \"source_table\",\n                    array(\n                        select (\n                            select attname::text\n                            from pg_attribute\n                            where\n                                attrelid = con.conrelid and\n                                attnum = con.conkey[i]\n                        )\n                        from generate_series(array_lower(con.conkey, 1), array_upper(con.conkey, 1)) i\n                    ) as \"source_keys\",\n                    (\n                        select nspname\n                        from pg_namespace ns2\n                        join pg_class cl2 on ns2.oid = cl2.relnamespace\n                        where cl2.oid = con.confrelid\n                    ) as \"target_schema\",\n                    (\n                        select relname\n                        from pg_class\n                        where oid = con.confrelid\n                    ) as \"target_table\",\n                    array(\n                        select (\n                            select attname::text\n                            from pg_attribute\n                            where\n                                attrelid = con.confrelid and\n                                attnum = con.confkey[i]\n                        )\n                        from generate_series(array_lower(con.confkey, 1), array_upper(con.confkey, 1)) i\n                    ) as \"target_keys\"\n                from pg_class cl\n                join pg_namespace ns on cl.relnamespace = ns.oid\n                join pg_constraint con on con.conrelid = cl.oid\n                where\n                    ns.nspname = 'public' and\n                    cl.relname >= 'A' and\n                    cl.relname <= 'z' and\n                    con.contype = 'f'\n                order by\n                    \"source_table\",\n                    con.conname\n                ;\n                \"#.to_string(),\n            DatabaseProtocol::PostgreSQL).await?"
---
++
++
++
